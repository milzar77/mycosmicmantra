<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Page</title>

    <style>
td {

  width: 400px;
  vertical-align: top;
}
</style>

    <script>

        const fixedSource = "{ \"data\": 1, \"dataset\": [{\"rgba()\":\"1\"},{\"rgb()\":\"2\"} ], }"

        function readJsonFixed(source) {
            var line = "";
            //alert("SOURCE without context parenthesis:\n"+source);
            try  {
                var obj1 = eval(source);
                line = "\n"+"RESULT:\n"+obj1;
                document.all.myconsoleOutput.innerText = document.all.myconsoleOutput.innerText+line;
            } catch(ex) {
                document.all.myconsoleError.innerText = document.all.myconsoleError.innerText+ "\nERROR:\n"+ex;
            }
            return obj1;
        }

        function readJson(source, prop) {
            var line = "";
            //alert("SOURCE:\n"+source);
            var obj1 = null;
            try  {
                obj1 = eval("("+source+")");
                line = "RESULT json:\n"+obj1+"\n";
                document.all.myconsoleOutput.innerText = line+document.all.myconsoleOutput.innerText;
            } catch(ex) {
                document.all.myconsoleError.innerText = +("ERROR:\n"+ex)+"\n"+document.all.myconsoleError.innerText;
            }

            try  {
                line = "RESULT "+prop+":\n"+ eval("obj1."+prop) + "\n";
                document.all.myconsoleOutput.innerText = line+document.all.myconsoleOutput.innerText;
            } catch(ex) {
                document.all.myconsoleError.innerText = ("ERROR:\n"+ex)+"\n"+document.all.myconsoleError.innerText;
            }

            try  {
                obj1.data.toString();
                obj1.dataset.toString();

                line = "RESULT data:\n"+obj1.data+"\n";
                document.all.myconsoleOutput.innerText = line+document.all.myconsoleOutput.innerText;
                line = "\n"+"RESULT dataset:\n"+obj1.dataset;
            } catch(ex) {
                document.all.myconsoleError.innerText =("ERROR:\n"+ex)+"\n"+ document.all.myconsoleError.innerText;
            }
            return obj1;
        }

    </script>

</head>
<body>

<form name="myform">

    <table>

        <tr><td>

    <label><b>Sorgente JSON:</b><br>
    <textarea name="mysource" cols="80" rows="5">
{data:1, dataset: 2, globalData: 3}
    </textarea>
    </label>

    <div><br></div>

    <label><b>Propriet√† nel JSON elaborato da leggere:</b><br>
    <input type="text" name="mydata" value="globalData" />
    </label>

    <div><br></div>

    <input type="button" name="read1" value="eval CON parentesi tonde" onclick="readJson(myform.mysource.value, myform.mydata.value)" />

    <input type="button" name="read2" value="eval SENZA parentesi tonde" onclick="readJsonFixed(fixedSource)" />
        </td>
        <td >

            <table>
            <tr><td style="background-color: lightgray;">
            <xmp id="myconsoleOutput" style="width: inherit; height: 100px; overflow: scroll;">
            </xmp>
            </td></tr>
                <tr><td style="background-color: coral;">
                    <xmp id="myconsoleError" style="width: inherit; height: 100px; overflow: scroll;">
                    </xmp>
                </td></tr>
            </table>

        </td>
        </tr>

</table>

</form>

</body>
</html>